<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Super Anusha World ‚ù§Ô∏è</title>
    <style>
        * { -webkit-backface-visibility: hidden; -webkit-transform: translateZ(0); }
        body { 
            background: linear-gradient(to bottom, #ffafbd, #ffc3a0); 
            margin: 0; overflow: hidden; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            display: flex; justify-content: center; align-items: center; height: 100vh; 
            touch-action: none; position: fixed; width: 100%; 
        }
        #game-wrapper { 
            position: relative; width: 100%; max-width: 900px; height: 500px; 
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 100%); 
            overflow: hidden; border: 8px solid white; border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }
        canvas { display: block; width: 100%; height: 100%; }
        .screen { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            background: rgba(255, 175, 189, 0.9); z-index: 100; text-align: center; 
            backdrop-filter: blur(5px);
        }
        h1 { color: white; text-shadow: 3px 3px 0px #ff4d6d; font-size: 42px; margin-bottom: 20px; }
        button { 
            padding: 18px 45px; font-size: 22px; background: #ff4d6d; color: white; 
            border: none; border-radius: 50px; cursor: pointer; font-weight: bold;
            box-shadow: 0 6px #c9184a; transition: 0.2s;
        }
        button:hover { background: #ff758c; transform: translateY(-2px); }
        button:active { transform: translateY(3px); box-shadow: 0 2px #c9184a; }
        
        #touch-controls { 
            position: absolute; bottom: 25px; width: 100%; display: flex; 
            justify-content: space-between; padding: 0 30px; box-sizing: border-box; 
            z-index: 50; pointer-events: none; 
        }
        .t-btn { 
            width: 80px; height: 80px; background: rgba(255,255,255,0.5); 
            border-radius: 50%; pointer-events: auto; display: flex; 
            align-items: center; justify-content: center; font-size: 30px;
            color: #ff4d6d; border: 3px solid white; user-select: none;
            backdrop-filter: blur(2px);
        }
    </style>
</head>
<body>

<div id="game-wrapper">
    <canvas id="gameCanvas"></canvas>
    
    <div id="start-screen" class="screen">
        <h1>Super Anusha World</h1>
        <button id="start-btn">START QUEST</button>
    </div>

    <div id="victory-screen" class="screen" style="display:none;">
        <h1 style="font-size: 50px;">‚ù§Ô∏è ANUSHA ‚ù§Ô∏è</h1>
        <p style="color: white; font-size: 24px; font-weight: bold;">You found all my love!</p>
        <h2 style="color: #ff4d6d; background: white; padding: 10px 20px; border-radius: 20px;">Will you be my Valentine?</h2>
        <button onclick="location.reload()" style="margin-top:20px;">PLAY AGAIN</button>
    </div>

    <div id="touch-controls">
        <div style="display:flex; gap:20px;">
            <div id="btn-left" class="t-btn">‚óÄ</div>
            <div id="btn-right" class="t-btn">‚ñ∂</div>
        </div>
        <div id="btn-jump" class="t-btn">‚ñ≤</div>
    </div>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = 900;
canvas.height = 500;

let gameActive = false;
let score = 0;
const gravity = 0.7;
const worldWidth = 3000; // Even bigger world!

const player = { x: 100, y: 300, w: 35, h: 35, vx: 0, vy: 0, speed: 7, jumpPower: -16, grounded: false };
const camera = { x: 0 };
const keys = {};

const platforms = [
    { x: 0, y: 420, w: 700, h: 80 },
    { x: 800, y: 330, w: 300, h: 30 },
    { x: 1200, y: 240, w: 300, h: 30 },
    { x: 1600, y: 360, w: 400, h: 30 },
    { x: 2100, y: 270, w: 300, h: 30 },
    { x: 2500, y: 380, w: 500, h: 120 },
];

const hearts = [
    { x: 850, y: 290, collected: false },
    { x: 1250, y: 200, collected: false },
    { x: 1700, y: 320, collected: false },
    { x: 2200, y: 230, collected: false },
    { x: 2600, y: 340, collected: false }
];

const clouds = Array.from({length: 15}, () => ({
    x: Math.random() * worldWidth,
    y: Math.random() * 200,
    s: 0.2 + Math.random() * 0.5, // Parallax speed
    w: 60 + Math.random() * 100
}));

// Controls setup
window.addEventListener('keydown', e => keys[e.code] = true);
window.addEventListener('keyup', e => keys[e.code] = false);

function bindTouch(id, key) {
    const btn = document.getElementById(id);
    btn.addEventListener('touchstart', (e) => { e.preventDefault(); keys[key] = true; }, {passive: false});
    btn.addEventListener('touchend', (e) => { e.preventDefault(); keys[key] = false; }, {passive: false});
}
bindTouch('btn-left', 'ArrowLeft');
bindTouch('btn-right', 'ArrowRight');
bindTouch('btn-jump', 'ArrowUp');

document.getElementById('start-btn').addEventListener('click', () => {
    document.getElementById('start-screen').style.display = 'none';
    gameActive = true;
    gameLoop();
});

function drawHeart(x, y, size, color, glow = false) {
    if(glow) {
        ctx.shadowBlur = 15;
        ctx.shadowColor = color;
    }
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(x, y + size/4);
    ctx.quadraticCurveTo(x, y, x - size/2, y);
    ctx.quadraticCurveTo(x - size, y, x - size, y + size/2);
    ctx.quadraticCurveTo(x - size, y + size, x, y + size * 1.5);
    ctx.quadraticCurveTo(x + size, y + size, x + size, y + size/2);
    ctx.quadraticCurveTo(x + size, y, x + size/2, y);
    ctx.quadraticCurveTo(x, y, x, y + size/4);
    ctx.fill();
    ctx.shadowBlur = 0; // Reset
}

function update() {
    if (keys['ArrowLeft']) player.vx = -player.speed;
    else if (keys['ArrowRight']) player.vx = player.speed;
    else player.vx *= 0.85;

    if (keys['ArrowUp'] && player.grounded) {
        player.vy = player.jumpPower;
        player.grounded = false;
    }

    player.vy += gravity;
    player.x += player.vx;
    player.y += player.vy;

    player.grounded = false;
    platforms.forEach(p => {
        if (player.x + player.w > p.x && player.x < p.x + p.w &&
            player.y + player.h > p.y && player.y + player.h < p.y + p.h && player.vy >= 0) {
            player.y = p.y - player.h;
            player.vy = 0;
            player.grounded = true;
        }
    });

    if (player.x < 0) player.x = 0;
    if (player.x > worldWidth - player.w) player.x = worldWidth - player.w;
    if (player.y > 600) { player.x = 100; player.y = 300; player.vy = 0; } 

    camera.x = player.x - canvas.width / 2;
    if (camera.x < 0) camera.x = 0;
    if (camera.x > worldWidth - canvas.width) camera.x = worldWidth - canvas.width;

    hearts.forEach(h => {
        if (!h.collected && Math.hypot(player.x - h.x, player.y - h.y) < 45) {
            h.collected = true;
            score++;
        }
    });

    if (score === hearts.length && player.x > 2700) {
        gameActive = false;
        document.getElementById('victory-screen').style.display = 'flex';
    }
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw Parallax Clouds
    clouds.forEach(c => {
        ctx.fillStyle = "rgba(255, 255, 255, 0.6)";
        ctx.beginPath();
        ctx.ellipse(c.x - (camera.x * c.s), c.y, c.w/2, 25, 0, 0, Math.PI*2);
        ctx.fill();
    });

    ctx.save();
    ctx.translate(-Math.floor(camera.x), 0);

    // Platforms
    platforms.forEach(p => {
        // Platform Body
        let grad = ctx.createLinearGradient(p.x, p.y, p.x, p.y + p.h);
        grad.addColorStop(0, '#ff9a9e');
        grad.addColorStop(1, '#fecfef');
        ctx.fillStyle = grad;
        
        // Rounded corners effect (simple rect for perf)
        ctx.fillRect(p.x, p.y, p.w, p.h);
        
        // "Frosting" Top
        ctx.fillStyle = "rgba(255,255,255,0.8)";
        ctx.fillRect(p.x, p.y, p.w, 6);
    });

    // Hearts
    hearts.forEach(h => {
        if (!h.collected) {
            let bob = Math.sin(Date.now() / 200) * 5;
            drawHeart(h.x, h.y + bob, 15, "#ff4d6d", true);
        }
    });

    // Finish Line
    ctx.font = "60px Arial";
    ctx.fillText("üè∞", 2750, 370);

    // Player (The Main Heart)
    drawHeart(player.x + 15, player.y, 18, "#ff0054", true);

    ctx.restore();

    // UI Score
    ctx.fillStyle = "#ff4d6d";
    ctx.font = "bold 24px 'Segoe UI'";
    ctx.fillText(`Love Found: ${score}/${hearts.length}`, 30, 45);
}

function gameLoop() {
    if (!gameActive) return;
    update();
    draw();
    requestAnimationFrame(gameLoop);
}
</script>
</body>
</html>
